
<%= form_tag(genre_search_books_path, method: :get) do %>
    <% for genre in Genre.all %>
      <%= check_box_tag("genres[]", genre.id) %>
      <%=h genre.name %><br />
    <% end %>
    <%= submit_tag("Filter")%>
<% end %>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Author</th>
      <th>Return by</th>
      <th>Description</th>
      <th>Genre(s)<th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= book.name %></td>
        <td><%= book.author %></td>
        <td><%= book.return_by %></td>
        <td><%= book.description %></td>
        <td>
            <% for genre in book.genres %>
               <%= genre.name %>
            <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>